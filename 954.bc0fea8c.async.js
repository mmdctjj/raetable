"use strict";(self.webpackChunkraetable=self.webpackChunkraetable||[]).push([[954],{48954:function(Fe,pn,s){s.r(pn),s.d(pn,{BottomToTop:function(){return w},EAnimation:function(){return en},ECondition:function(){return In},EForm:function(){return Wn},EFormItem:function(){return an},EPage:function(){return ge},ETable:function(){return zn},ETitle:function(){return oe},FORMTYPE:function(){return T},LeftToRight:function(){return Dn},OPERATION:function(){return f},RightToLeft:function(){return bn},formatSearch:function(){return ln},objectIsQqual:function(){return Ae},objectToString:function(){return un},useFetch:function(){return G},useTrigger:function(){return rn}});var wn=s(97857),g=s.n(wn),Gn=s(5574),b=s.n(Gn),c=s(67294),B=s(67759),xn=s(71230),q=s(15746),_=s(26713),N=s(71577),Kn=s(13769),nn=s.n(Kn),Hn=s(68400),Z=s.n(Hn),$=s(94589),e=s(85893),Qn=["direction"],An,yn,jn,Sn,Tn,En,Jn=(0,$.F4)(An||(An=Z()([`
  0% {
    transform: translateX(50%);
  }
  80% {
    transform: translateX(-2%)
  }
  100% {
    transform: translateX(0);
    opacity: 1
  }
`]))),Vn=(0,$.F4)(yn||(yn=Z()([`
  0% {
    transform: translateX(-50%);
  }
  80% {
    transform: translateX(2%)
  }
  100% {
    transform: translateX(0);
    opacity: 1
  }
`]))),Yn=(0,$.F4)(jn||(jn=Z()([`
  0% {
    transform: translateY(50%);
  }

  80% {
    transform: translateY(-10%);
  }

  100% {
    transform: translateY(0);
    opacity: 1
  }
`]))),bn=$.ZP.div(Sn||(Sn=Z()([`
  transform: translateX(50%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms
`])),Jn,function(n){var t;return(t=n.duration)!==null&&t!==void 0?t:300},function(n){var t,a;return((t=n.index)!==null&&t!==void 0?t:0)*((a=n.delay)!==null&&a!==void 0?a:130)}),Dn=$.ZP.div(Tn||(Tn=Z()([`
  transform: translateX(-100%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms;
`])),Vn,function(n){var t;return(t=n.duration)!==null&&t!==void 0?t:300},function(n){var t,a;return((t=n.index)!==null&&t!==void 0?t:0)*((a=n.delay)!==null&&a!==void 0?a:130)}),w=$.ZP.div(En||(En=Z()([`
  transform: translateY(50%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms
`])),Yn,function(n){var t;return(t=n.duration)!==null&&t!==void 0?t:300},function(n){var t,a;return((t=n.index)!==null&&t!==void 0?t:0)*((a=n.delay)!==null&&a!==void 0?a:130)}),Mn=function(t){var a=t.direction,l=a===void 0?"BT":a,o=nn()(t,Qn),i={BT:(0,e.jsx)(w,g()({},o)),RL:(0,e.jsx)(bn,g()({},o)),LR:(0,e.jsx)(Dn,g()({},o))};return i[l]},en=Mn;function qn(n){var t,a=n.condition,l=n.columns,o=n.onConditionChange,i=n.showConditionOkBtn,v=i===void 0?!1:i,y=n.size,r=B.Z.useForm(),u=b()(r,1),d=u[0],p=(0,c.useCallback)(function(h,C){return o(function(k){return g()(g()({},k),C)})},[o]),j=(0,c.useCallback)(function(){o({}),d.resetFields()},[d,o]);return(0,c.useEffect)(function(){return d.setFieldsValue(a)},[a]),(0,e.jsx)(B.Z,{form:d,labelCol:{span:6},layout:"inline",onValuesChange:v?function(){}:p,size:y,children:(0,e.jsxs)(xn.Z,{style:{width:"100%"},children:[(0,e.jsx)(q.Z,{span:20,children:(0,e.jsx)(xn.Z,{children:l==null?void 0:l.map(function(h,C){return(0,e.jsx)(q.Z,{span:(l.length===4,6),children:(0,e.jsx)(en,{index:C,children:(0,e.jsx)(B.Z.Item,{name:h.dataIndex,label:h.title,children:(0,e.jsx)(an,{content:h,size:y,typeKey:"conditionType",type:f.EDIT,value:""})},h.key)})},h.key)})})}),(0,e.jsx)(q.Z,{span:4,style:{textAlign:"right"},children:(0,e.jsx)(B.Z.Item,{children:(0,e.jsx)(en,{index:(t=l==null?void 0:l.length)!==null&&t!==void 0?t:5,children:(0,e.jsxs)(_.Z,{children:[v?(0,e.jsx)(N.ZP,{onClick:function(){return o(d.getFieldsValue())},type:"primary",children:"\u786E\u5B9A"}):"",(0,e.jsx)(N.ZP,{onClick:function(){return j()},danger:!0,children:"\u6E05\u7A7A"})]})})})})]})})}var In=qn,_n=s(9783),m=s.n(_n),ne=s(86738),ee=s(15223),te=s(48165),ae=s(37735),Ln,Fn,ie=$.ZP.div(Ln||(Ln=Z()([`
  display: flex;
  justify-content: space-between;
  align-items: center;
`]))),Zn=$.ZP.div(Fn||(Fn=Z()([""]))),$n=function(t){var a=t.affairName,l=a===void 0?"":a,o=t.backPath,i=o===void 0?"":o,v=t.extendAffair,y=t.onClickAdd,r=y===void 0?function(){}:y,u=t.pageTitle,d=u===void 0?"":u,p=(0,c.useCallback)(function(){window.location.href.includes("/#/")?window.location.hash=i:window.location.href=i},[i]);return(0,e.jsxs)(ie,{children:[(0,e.jsxs)(Zn,{children:[i&&i!==""?(0,e.jsx)(N.ZP,{icon:(0,e.jsx)(ae.Z,{}),onClick:p,type:"link"}):"",d]}),(0,e.jsx)(Zn,{children:(0,e.jsxs)(_.Z,{children:[v,(0,e.jsxs)(N.ZP,{onClick:r,type:"primary",children:["+ \u65B0\u589E",l]})]})})]})},oe=$n,re=["affairName","backPath","columns","extendAffair","size","pageTitle","onAffairSuccess","onConditionChange","conditionContainerStyle","tableContainerStyle","titleContainerStyle"],kn,Pn,Bn,le=$.ZP.div(kn||(kn=Z()([`
  background-color: @primary-color
`]))),ue=$.ZP.div(Pn||(Pn=Z()([`
  background-color: @primary-color
`]))),se=$.ZP.div(Bn||(Bn=Z()([`
  background-color: @primary-color
`]))),de={background:"#fff",padding:15},Nn={background:"#fff",padding:15,margin:15};function ce(n){var t,a=n.affairName,l=a===void 0?"":a,o=n.backPath,i=o===void 0?"":o,v=n.columns,y=n.extendAffair,r=n.size,u=r===void 0?"middle":r,d=n.pageTitle,p=d===void 0?"":d,j=n.onAffairSuccess,h=j===void 0?function(){return new Promise(function(){})}:j,C=n.onConditionChange,k=n.conditionContainerStyle,I=k===void 0?{}:k,L=n.tableContainerStyle,D=L===void 0?{}:L,X=n.titleContainerStyle,W=X===void 0?{}:X,F=nn()(n,re),x=rn(),U=b()(x,2),z=U[0],P=U[1],sn=(t={},m()(t,f.ADD,"\u65B0\u589E"),m()(t,f.EDIT,"\u7F16\u8F91"),m()(t,f.DISPLAY,"\u67E5\u770B"),t),dn=(0,c.useState)({}),V=b()(dn,2),K=V[0],H=V[1],Q=(0,c.useState)(f.ADD),R=b()(Q,2),O=R[0],J=R[1],cn=(0,c.useCallback)(function(S){J(f.EDIT),H(S),P()},[]),fn=(0,c.useCallback)(function(S){J(f.DISPLAY),H(S),P()},[]),vn=(0,c.useCallback)(function(S){var A;(A=F.onClickDeleteButton)===null||A===void 0||A.call(F,S)},[]),E=(0,c.useCallback)(function(){J(f.ADD),H({}),P()},[]),mn=(0,c.useState)(ln(window.location.href)),Un=b()(mn,2),hn=Un[0],ye=Un[1],je=(0,c.useMemo)(function(){return{title:"\u64CD\u4F5C",dataIndex:"action",key:"action",width:200,fixed:"right",render:function(A,Y){return(0,e.jsxs)(_.Z,{children:[(0,e.jsx)(N.ZP,{size:u,onClick:function(){return cn(Y)},type:"primary",children:"\u7F16\u8F91"}),(0,e.jsx)(ne.Z,{title:"\u5220\u9664",description:"\u60A8\u786E\u8BA4\u5220\u9664\u8FD9\u6761".concat(l,"\u6570\u636E\u5417\uFF1F"),okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",onConfirm:function(){return vn([Y[F.rowKey]])},children:(0,e.jsx)(N.ZP,{danger:!0,size:u,children:"\u5220\u9664"})}),(0,e.jsx)(N.ZP,{size:u,onClick:function(){return fn(Y)},children:"\u8BE6\u60C5"})]})}}},[]),Se=(0,c.useMemo)(function(){var S=v.filter(function(A){return!A.hiddenInTable}).map(function(A){return A.select?g()(g()({},A),{},{render:function(M){var Cn,gn;return(Cn=A.select)===null||Cn===void 0||(gn=Cn.find(function(Le){return Le.value===M}))===null||gn===void 0?void 0:gn.label}}):A});return S.find(function(A){return A.title==="\u64CD\u4F5C"})?S:S.concat(je)},[v]),Te=(0,c.useMemo)(function(){return v.filter(function(S){return S.conditionType})},[v]),Ee=(0,c.useMemo)(function(){return v.filter(function(S){return S.affairType})},[v]),be=(0,c.useCallback)(function(){return P()},[]),De=(0,c.useCallback)(function(){return P()},[]),Ie=(0,c.useCallback)(function(S){return O===f.DISPLAY?new Promise(function(A){P(),A({})}):h(S,O).then(function(){return P()}).catch(function(A){throw new Error(A)})},[O]);return(0,c.useEffect)(function(){return C&&C(hn)},[hn]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(se,{className:F.titleContainerClass,style:g()(g()({},de),W),children:(0,e.jsx)($n,{affairName:l,backPath:i,extendAffair:y,onClickAdd:E,pageTitle:p})}),(0,e.jsx)(le,{className:F.conditionContainerClass,style:g()(g()({},Nn),I),children:(0,e.jsx)(In,{columns:Te,condition:hn,size:u,onConditionChange:ye})}),(0,e.jsx)(ue,{className:F.tableContainerClass,style:g()(g()({},Nn),D),children:(0,e.jsx)(ee.Z,g()({columns:Se,size:u},F))}),(0,e.jsx)(te.Z,{open:z,onCancel:be,onOk:De,title:sn[O]+l,footer:!1,children:(0,e.jsx)(Wn,{affairWidth:700,columns:Ee,affairData:K,type:O,onAffairSuccess:Ie})})]})}var zn=ce,Rn=s(13689),tn=s(89847),On=s(55742),Xn=s(72269),fe=s(34041);function ve(n){var t,a,l,o,i,v,y,r=n.content,u=n.value,d=n.onChange,p=n.size,j=n.type,h=n.typeKey;if(!(r!=null&&r[h]))return(0,e.jsx)(e.Fragment,{});var C=(t={},m()(t,T.CASCADER,(0,e.jsx)(Rn.Z,{size:p,placeholder:"\u8BF7\u8F93\u5165".concat(r.title),value:u,onChange:d,options:r.select,loadData:r.loadData})),m()(t,T.INPUT,(0,e.jsx)(tn.Z,{size:p,value:u,placeholder:"\u8BF7\u8F93\u5165".concat(r.title),onChange:d})),m()(t,T.RADIO,(0,e.jsx)(On.ZP.Group,g()({size:p,options:r.select,value:u,onChange:d,disabled:j===f.DISPLAY},r))),m()(t,T.SWITCH,(0,e.jsx)(Xn.Z,{onChange:function(D){return d==null?void 0:d(D===!0?1:0)},checked:typeof u=="undefined"?!0:Boolean(u),disabled:j===f.DISPLAY})),m()(t,T.SELECT,(0,e.jsx)(fe.Z,{size:p,style:{minWidth:100},allowClear:!0,options:r.select,onChange:function(D){r.linked&&localStorage.setItem(r.dataIndex,D),d==null||d(D)},placeholder:"\u8BF7\u9009\u62E9".concat(r.title),value:u})),m()(t,T.TEXTAREA,(0,e.jsx)(tn.Z.TextArea,{size:p,disabled:j===f.DISPLAY,placeholder:"\u8BF7\u8F93\u5165".concat(r.title),onChange:d,rows:5,value:u})),t),k=(o={},m()(o,T.CASCADER,(0,e.jsx)(Rn.Z,{size:p,placeholder:"\u8BF7\u8F93\u5165".concat(r.title),value:u,onChange:d,options:r.select,loadData:r.loadData})),m()(o,T.INPUT,(0,e.jsx)(e.Fragment,{children:u})),m()(o,T.RADIO,(0,e.jsx)(On.ZP.Group,g()({size:p,options:r.select,value:u,onChange:d,disabled:j===f.DISPLAY},r))),m()(o,T.SWITCH,(0,e.jsx)(Xn.Z,{onChange:function(D){return d==null?void 0:d(D===!0?1:0)},checked:typeof u=="undefined"?!0:Boolean(u),disabled:j===f.DISPLAY})),m()(o,T.SELECT,(0,e.jsx)(e.Fragment,{children:(a=r.select)===null||a===void 0||(l=a.find(function(L){return L.value===u}))===null||l===void 0?void 0:l.label})),m()(o,T.TEXTAREA,(0,e.jsx)(e.Fragment,{children:u})),o),I=(i={},m()(i,f.ADD,C),m()(i,f.EDIT,C),m()(i,f.DISPLAY,k),i);return(v=(y=I[j])===null||y===void 0?void 0:y[r==null?void 0:r[h]])!==null&&v!==void 0?v:(0,e.jsx)(e.Fragment,{children:"\u6682\u65E0\u5339\u914D\u9879"})}var an=ve;function me(n){var t=n.affairData,a=t===void 0?{}:t,l=n.affairWidth,o=n.columns,i=o===void 0?[]:o,v=n.extendForm,y=n.type,r=y===void 0?f.ADD:y,u=n.isShowSumbit,d=u===void 0?!0:u,p=n.hiddenLabels,j=p===void 0?[]:p,h=n.onAffairSuccess,C=B.Z.useForm(),k=b()(C,1),I=k[0],L=rn(),D=b()(L,2),X=D[0],W=D[1],F=(0,c.useCallback)(function(){I.validateFields().then(function(x){W(),h==null||h(x).then(function(){return W()})})},[I]);return(0,c.useEffect)(function(){return Object.keys(a).length===0?I.resetFields():I.setFieldsValue(g()({enabled:0},a))},[a]),(0,e.jsxs)(B.Z,{form:I,layout:"horizontal",labelAlign:"right",labelCol:{span:l&&l>900?2:5},labelWrap:!0,children:[(0,e.jsx)(B.Z.Item,{style:{display:"none"},name:"id",children:(0,e.jsx)(tn.Z,{type:"hidden"})}),i==null?void 0:i.map(function(x,U){var z;return(0,e.jsx)(w,{index:U,children:(0,e.jsx)(B.Z.Item,{label:(0,e.jsx)(e.Fragment,{children:j.includes(x.title)?"":x.title}),name:x.dataIndex,rules:(z=x.rules)!==null&&z!==void 0?z:[],children:(0,e.jsx)(an,{value:!0,content:x,onChange:x.onChange,type:r,typeKey:"affairType"})},x.key)},x.key)}),(0,e.jsx)(w,{index:i.length+1,children:v}),d?(0,e.jsx)(w,{index:v?i.length+2:i.length+1,children:(0,e.jsx)(B.Z.Item,{wrapperCol:{offset:i.filter(function(x){return j.includes(x.title)}).length?0:l&&l>900?2:5},children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(N.ZP,{loading:X,type:"primary",onClick:F,children:"\u786E\u8BA4"}),r!==f.DISPLAY?(0,e.jsx)(N.ZP,{type:"link",onClick:function(){return I.resetFields()},children:"\u6E05\u7A7A"}):""]})})}):""]})}var Wn=me,he=["addAffair","delAffair","editAffair","formatList","getLists"];function on(n){return new Promise(function(t){t({data:[],code:200,msg:""})})}function Ce(n){var t,a=n.addAffair,l=a===void 0?on:a,o=n.delAffair,i=o===void 0?on:o,v=n.editAffair,y=v===void 0?on:v,r=n.formatList,u=r===void 0?function(E){return E}:r,d=n.getLists,p=nn()(n,he),j=(0,c.useState)(function(){return ln(window.location.href)}),h=b()(j,2),C=h[0],k=h[1],I=G(l),L=b()(I,2),D=L[0],X=L[1],W=G(i),F=b()(W,2),x=F[0],U=F[1],z=G(y),P=b()(z,2),sn=P[0],dn=P[1],V=G(d,{refreshDeps:[C],debounceWait:400,manual:!0}),K=b()(V,3),H=K[0],Q=K[1],R=K[2],O=(0,c.useMemo)(function(){var E;return u==null?void 0:u((E=R==null?void 0:R.data)!==null&&E!==void 0?E:[])},[R]),J=(0,c.useCallback)(function(E){console.log(E),k(E)},[]),cn=(t={},m()(t,f.ADD,X),m()(t,f.EDIT,dn),t),fn=(0,c.useCallback)(function(E,mn){return cn[mn](E).then(function(){return Q(C)})},[Q,C]),vn=(0,c.useCallback)(function(E){return U(E)},[]);return(0,c.useEffect)(function(){return Q(C)},[C]),(0,c.useEffect)(function(){return console.log(C)},[C]),(0,e.jsx)(zn,g()({addLoading:D,deleteLoading:x,editLoading:sn,dataSource:O,loading:H,onAffairSuccess:fn,onClickDeleteButton:vn,onConditionChange:J},p))}var ge=Ce,f;(function(n){n.ADD="add",n.DISPLAY="display",n.EDIT="edit"})(f||(f={}));var T;(function(n){n.CASCADER="CASCADER",n.CYCLESELECT="cycleSelect",n.CRON="cron",n.DATERANGE="dataRange",n.EXCEPTION="exception",n.INPUT="input",n.JSON="json",n.MODEL="selectModel",n.METRIC="selectMetric",n.RADIO="radio",n.SEARCHINPUT="searchInput",n.SELECT="select",n.SWITCH="switch",n.TAGLIST="tagList",n.TEXTAREA="textArea",n.TIMERANGE="timeRange",n.TIMESELECT="timeSelect",n.UPLOAD="uplaod",n.INSPECTION="inspection",n.STRATEGY="strategy",n.TEMPLATE="template",n.RULETEMPLATE="ruleTemplate"})(T||(T={}));var pe=s(22821),rn=function(){var t=(0,pe.Z)(),a=b()(t,2),l=a[0],o=a[1].toggle;return[l,o]},xe=s(99659);function G(n,t){var a=(0,xe.Z)(n,t!=null?t:{}),l=a.data,o=a.run,i=a.loading;return[i,o,l]}var ln=function(t,a){var l=t.slice(t.indexOf("?"));return l.slice(1).split("&").reduce(function(o,i){return i.split("=")[1]&&(o[i.split("=")[0]]=i.split("=")[1].length>15||decodeURI(i.split("=")[1])===""||isNaN(Number(decodeURI(i.split("=")[1])))?decodeURI(i.split("=")[1]):Number(decodeURI(i.split("=")[1]))),o},a!=null?a:{current:1,pageSize:10})},un=function(t){return JSON.stringify(t)},Ae=function(t,a){return un(t)===un(a)}}}]);
