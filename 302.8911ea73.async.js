"use strict";(self.webpackChunkraetable=self.webpackChunkraetable||[]).push([[302],{76302:function(ke,yn,s){s.r(yn),s.d(yn,{BottomToTop:function(){return Q},EAnimation:function(){return tn},ECondition:function(){return an},EForm:function(){return ln},EFormItem:function(){return q},EPage:function(){return On},ETable:function(){return on},ETitle:function(){return le},FORMTYPE:function(){return E},LeftToRight:function(){return Ln},OPERATION:function(){return m},RightToLeft:function(){return In},formatSearch:function(){return dn},objectIsQqual:function(){return Te},objectToString:function(){return cn},useCondition:function(){return ge},useFetch:function(){return J},useForm:function(){return pe},useFormItem:function(){return Se},usePage:function(){return xe},useTable:function(){return Ae},useTrigger:function(){return sn}});var Xn=s(97857),v=s.n(Xn),Wn=s(5574),p=s.n(Wn),Kn=s(68400),P=s.n(Kn),u=s(67294),B=s(67759),xn=s(71230),_=s(15746),nn=s(26713),N=s(71577),Un=s(13769),en=s.n(Un),k=s(94589),t=s(85893),Gn=["direction"],An,jn,Tn,En,bn,Dn,Hn=(0,k.F4)(An||(An=P()([`
  0% {
    transform: translateX(50%);
  }
  80% {
    transform: translateX(-2%)
  }
  100% {
    transform: translateX(0);
    opacity: 1
  }
`]))),Qn=(0,k.F4)(jn||(jn=P()([`
  0% {
    transform: translateX(-50%);
  }
  80% {
    transform: translateX(2%)
  }
  100% {
    transform: translateX(0);
    opacity: 1
  }
`]))),Jn=(0,k.F4)(Tn||(Tn=P()([`
  0% {
    transform: translateY(50%);
  }

  80% {
    transform: translateY(-10%);
  }

  100% {
    transform: translateY(0);
    opacity: 1
  }
`]))),In=k.ZP.div(En||(En=P()([`
  transform: translateX(50%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms
`])),Hn,function(n){var e;return(e=n.duration)!==null&&e!==void 0?e:300},function(n){var e,a;return((e=n.index)!==null&&e!==void 0?e:0)*((a=n.delay)!==null&&a!==void 0?a:130)}),Ln=k.ZP.div(bn||(bn=P()([`
  transform: translateX(-100%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms;
`])),Qn,function(n){var e;return(e=n.duration)!==null&&e!==void 0?e:300},function(n){var e,a;return((e=n.index)!==null&&e!==void 0?e:0)*((a=n.delay)!==null&&a!==void 0?a:130)}),Q=k.ZP.div(Dn||(Dn=P()([`
  transform: translateY(50%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms
`])),Jn,function(n){var e;return(e=n.duration)!==null&&e!==void 0?e:300},function(n){var e,a;return((e=n.index)!==null&&e!==void 0?e:0)*((a=n.delay)!==null&&a!==void 0?a:130)}),Vn=function(e){var a=e.direction,i=a===void 0?"BT":a,r=en()(e,Gn),o={BT:(0,t.jsx)(Q,v()({},r)),RL:(0,t.jsx)(In,v()({},r)),LR:(0,t.jsx)(Ln,v()({},r))};return o[i]},tn=Vn,Fn,Mn=k.ZP.div(Fn||(Fn=P()([`
  background-color: @primary-color
`]))),Yn={background:"#fff",padding:15,margin:15};function qn(n){var e,a=n.condition,i=n.conditionContainerClass,r=n.conditionContainerStyle,o=n.columns,f=n.onConditionChange,A=n.showConditionOkBtn,l=A===void 0?!1:A,d=n.size,c=B.Z.useForm(),C=p()(c,1),h=C[0],$=(0,u.useCallback)(function(y,j){return f(function(D){return v()(v()({},D),j)})},[f]),I=(0,u.useCallback)(function(){f({}),h.resetFields()},[h,f]);return(0,u.useEffect)(function(){return h.setFieldsValue(a)},[a]),(0,t.jsx)(Mn,{style:v()(v()({},Yn),r),className:i,children:(0,t.jsx)(B.Z,{form:h,labelCol:{span:6},layout:"inline",onValuesChange:l?function(){}:$,size:d,children:(0,t.jsxs)(xn.Z,{style:{width:"100%"},children:[(0,t.jsx)(_.Z,{span:20,children:(0,t.jsx)(xn.Z,{children:o==null?void 0:o.map(function(y,j){return(0,t.jsx)(_.Z,{span:(o.length===4,6),children:(0,t.jsx)(tn,{index:j,children:(0,t.jsx)(B.Z.Item,{name:y.dataIndex,label:y.title,children:(0,t.jsx)(q,{content:y,size:d,typeKey:"conditionType",type:m.EDIT,value:""})},y.key)})},y.key)})})}),(0,t.jsx)(_.Z,{span:4,style:{textAlign:"right"},children:(0,t.jsx)(B.Z.Item,{children:(0,t.jsx)(tn,{index:(e=o==null?void 0:o.length)!==null&&e!==void 0?e:5,children:(0,t.jsxs)(nn.Z,{children:[l?(0,t.jsx)(N.ZP,{onClick:function(){return f(h.getFieldsValue())},type:"primary",children:"\u786E\u5B9A"}):"",(0,t.jsx)(N.ZP,{onClick:function(){return I()},danger:!0,children:"\u6E05\u7A7A"})]})})})})]})})})}var an=qn,_n=s(9783),g=s.n(_n),ne=s(86738),ee=s(15223),te=s(48165),ae=s(37735),Zn,$n,Pn,oe=k.ZP.div(Zn||(Zn=P()([`
  background-color: @primary-color
`]))),ie=k.ZP.div($n||($n=P()([`
  display: flex;
  justify-content: space-between;
  align-items: center;
`]))),re={background:"#fff",padding:15},kn=k.ZP.div(Pn||(Pn=P()([""]))),Bn=function(e){var a=e.affairName,i=a===void 0?"":a,r=e.backPath,o=r===void 0?"":r,f=e.extendAffair,A=e.onClickAdd,l=e.pageTitle,d=l===void 0?"":l,c=e.titleContainerStyle,C=e.titleContainerClass,h=(0,u.useCallback)(function(){window.location.href.includes("/#/")?window.location.hash=o:window.location.href=o},[o]);return(0,t.jsx)(oe,{className:C,style:v()(v()({},re),c),children:(0,t.jsxs)(ie,{children:[(0,t.jsxs)(kn,{children:[o&&o!==""?(0,t.jsx)(N.ZP,{icon:(0,t.jsx)(ae.Z,{}),onClick:h,type:"link"}):"",d]}),(0,t.jsx)(kn,{children:(0,t.jsxs)(nn.Z,{children:[f,A?(0,t.jsxs)(N.ZP,{onClick:A,type:"primary",children:["+ \u65B0\u589E",i]}):""]})})]})})},le=Bn,ue=["affairName","backPath","columns","extendAffair","size","pageTitle","onAffairSuccess","onConditionChange","tableContainerStyle","titleContainerStyle"],Nn,se=k.ZP.div(Nn||(Nn=P()([`
  background-color: @primary-color
`]))),de={background:"#fff",padding:15,margin:15};function ce(n){var e,a=n.affairName,i=a===void 0?"":a,r=n.backPath,o=r===void 0?"":r,f=n.columns,A=n.extendAffair,l=n.size,d=l===void 0?"middle":l,c=n.pageTitle,C=c===void 0?"":c,h=n.onAffairSuccess,$=h===void 0?function(){return new Promise(function(){})}:h,I=n.onConditionChange,y=n.tableContainerStyle,j=y===void 0?{}:y,D=n.titleContainerStyle,L=D===void 0?{}:D,S=en()(n,ue),W=sn(),K=p()(W,2),x=K[0],F=K[1],w=(e={},g()(e,m.ADD,"\u65B0\u589E"),g()(e,m.EDIT,"\u7F16\u8F91"),g()(e,m.DISPLAY,"\u67E5\u770B"),e),fn=(0,u.useState)({}),V=p()(fn,2),vn=V[0],O=V[1],mn=(0,u.useState)(m.ADD),U=p()(mn,2),R=U[0],M=U[1],Cn=(0,u.useCallback)(function(T){M(m.EDIT),O(T),F()},[]),hn=(0,u.useCallback)(function(T){M(m.DISPLAY),O(T),F()},[]),gn=(0,u.useCallback)(function(T){var b;window.localStorage.setItem("deleteKeys",T.join(",")),(b=S.onClickDeleteButton)===null||b===void 0||b.call(S,T).then(function(){return window.localStorage.removeItem("deleteKeys")}).catch(function(){return window.localStorage.removeItem("deleteKeys")})},[]),pn=(0,u.useCallback)(function(){M(m.ADD),O({}),F()},[]),Z=(0,u.useState)(dn(window.location.href)),G=p()(Z,2),Sn=G[0],Ee=G[1],be={title:"\u64CD\u4F5C",dataIndex:"action",key:"action",width:200,fixed:"right",render:function(b,z){var Y,X;return(0,t.jsxs)(nn.Z,{children:[S.editLoading!==void 0?(0,t.jsx)(N.ZP,{size:d,onClick:function(){return Cn(z)},type:"primary",children:"\u7F16\u8F91"}):"",S.deleteLoading!==void 0?(0,t.jsx)(ne.Z,{cancelText:"\u53D6\u6D88",description:"\u60A8\u786E\u8BA4\u5220\u9664\u8FD9\u6761".concat(i,"\u6570\u636E\u5417\uFF1F"),okText:"\u786E\u5B9A",okButtonProps:{loading:S.deleteLoading},onConfirm:function(){return gn([z[S.rowKey]])},title:"\u5220\u9664",children:(0,t.jsx)(N.ZP,{danger:!0,loading:(Y=window.localStorage.getItem("deleteKeys"))===null||Y===void 0||(X=Y.split(","))===null||X===void 0?void 0:X.includes(z[S.rowKey]),size:d,children:"\u5220\u9664"})}):"",(0,t.jsx)(N.ZP,{size:d,onClick:function(){return hn(z)},children:"\u8BE6\u60C5"})]})}},De=(0,u.useMemo)(function(){var T=f.filter(function(b){return!b.hiddenInTable}).map(function(b){return b.select?v()(v()({},b),{},{render:function(Y){var X,H;return(X=b.select)===null||X===void 0||(H=X.find(function(Pe){return Pe.value===Y}))===null||H===void 0?void 0:H.label}}):b});return T.find(function(b){return b.title==="\u64CD\u4F5C"})?T:T.concat(be)},[f]),Ie=(0,u.useMemo)(function(){return f.filter(function(T){return T.conditionType})},[f]),Le=(0,u.useMemo)(function(){return f.filter(function(T){return T.affairType})},[f]),Fe=(0,u.useCallback)(function(){return F()},[]),Ze=(0,u.useCallback)(function(){return F()},[]),$e=function(b){return R===m.DISPLAY?new Promise(function(z){F(),z({})}):$(b,R).then(function(){return F()}).catch(function(z){throw new Error(z)})};return(0,u.useEffect)(function(){return I&&I(Sn)},[Sn]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(Bn,{affairName:i,backPath:o,extendAffair:A,onClickAdd:S.addLoading!==void 0?pn:void 0,pageTitle:C,titleContainerClass:S.titleContainerClass,titleContainerStyle:L}),(0,t.jsx)(an,{columns:Ie,conditionContainerClass:S.conditionContainerClass,conditionContainerStyle:S.conditionContainerStyle,condition:Sn,size:d,onConditionChange:Ee}),(0,t.jsx)(se,{className:S.tableContainerClass,style:v()(v()({},de),j),children:(0,t.jsx)(ee.Z,v()({columns:De,size:d},S))}),(0,t.jsx)(te.Z,{open:x,onCancel:Fe,onOk:Ze,title:w[R]+i,footer:!1,children:(0,t.jsx)(ln,{affairWidth:700,columns:Le,affairData:vn,type:R,onAffairSuccess:$e})})]})}var on=ce,Rn=s(13689),rn=s(89847),zn=s(55742),wn=s(72269),fe=s(34041);function ve(n){var e,a,i,r,o,f,A,l=n.content,d=n.value,c=n.onChange,C=n.size,h=n.type,$=n.typeKey;if(!(l!=null&&l[$]))return(0,t.jsx)(t.Fragment,{});var I=(e={},g()(e,E.CASCADER,(0,t.jsx)(Rn.Z,{size:C,placeholder:"\u8BF7\u8F93\u5165".concat(l.title),value:d,onChange:c,options:l.select,loadData:l.loadData})),g()(e,E.INPUT,(0,t.jsx)(rn.Z,{size:C,value:d,placeholder:"\u8BF7\u8F93\u5165".concat(l.title),onChange:c})),g()(e,E.RADIO,(0,t.jsx)(zn.ZP.Group,v()({size:C,options:l.select,value:d,onChange:c,disabled:h===m.DISPLAY},l))),g()(e,E.SWITCH,(0,t.jsx)(wn.Z,{onChange:function(L){return c==null?void 0:c(L===!0?1:0)},checked:typeof d=="undefined"?!0:Boolean(d),disabled:h===m.DISPLAY})),g()(e,E.SELECT,(0,t.jsx)(fe.Z,{size:C,style:{minWidth:100},allowClear:!0,options:l.select,onChange:function(L){l.linked&&localStorage.setItem(l.dataIndex,L),c==null||c(L)},placeholder:"\u8BF7\u9009\u62E9".concat(l.title),value:d})),g()(e,E.TEXTAREA,(0,t.jsx)(rn.Z.TextArea,{size:C,disabled:h===m.DISPLAY,placeholder:"\u8BF7\u8F93\u5165".concat(l.title),onChange:c,rows:5,value:d})),e),y=(r={},g()(r,E.CASCADER,(0,t.jsx)(Rn.Z,{size:C,placeholder:"\u8BF7\u8F93\u5165".concat(l.title),value:d,onChange:c,options:l.select,loadData:l.loadData})),g()(r,E.INPUT,(0,t.jsx)(t.Fragment,{children:d})),g()(r,E.RADIO,(0,t.jsx)(zn.ZP.Group,v()({size:C,options:l.select,value:d,onChange:c,disabled:h===m.DISPLAY},l))),g()(r,E.SWITCH,(0,t.jsx)(wn.Z,{onChange:function(L){return c==null?void 0:c(L===!0?1:0)},checked:typeof d=="undefined"?!0:Boolean(d),disabled:h===m.DISPLAY})),g()(r,E.SELECT,(0,t.jsx)(t.Fragment,{children:(a=l.select)===null||a===void 0||(i=a.find(function(D){return D.value===d}))===null||i===void 0?void 0:i.label})),g()(r,E.TEXTAREA,(0,t.jsx)(t.Fragment,{children:d})),r),j=(o={},g()(o,m.ADD,I),g()(o,m.EDIT,I),g()(o,m.DISPLAY,y),o);return(f=(A=j[h])===null||A===void 0?void 0:A[l==null?void 0:l[$]])!==null&&f!==void 0?f:(0,t.jsx)(t.Fragment,{children:"\u6682\u65E0\u5339\u914D\u9879"})}var q=ve;function me(n){var e=n.affairData,a=e===void 0?{}:e,i=n.affairWidth,r=n.columns,o=r===void 0?[]:r,f=n.extendForm,A=n.type,l=A===void 0?m.ADD:A,d=n.isShowSumbit,c=d===void 0?!0:d,C=n.hiddenLabels,h=C===void 0?[]:C,$=n.onAffairSuccess,I=B.Z.useForm(),y=p()(I,1),j=y[0],D=sn(),L=p()(D,2),S=L[0],W=L[1],K=(0,u.useCallback)(function(){j.validateFields().then(function(x){W(),$==null||$(x).then(function(){return W()})})},[j,l]);return(0,u.useEffect)(function(){return Object.keys(a).length===0?j.resetFields():j.setFieldsValue(v()({enabled:0},a))},[a]),(0,t.jsxs)(B.Z,{form:j,layout:"horizontal",labelAlign:"right",labelCol:{span:i&&i>900?2:5},labelWrap:!0,children:[(0,t.jsx)(B.Z.Item,{style:{display:"none"},name:"id",children:(0,t.jsx)(rn.Z,{type:"hidden"})}),o==null?void 0:o.map(function(x,F){var w;return(0,t.jsx)(Q,{index:F,children:(0,t.jsx)(B.Z.Item,{label:(0,t.jsx)(t.Fragment,{children:h.includes(x.title)?"":x.title}),name:x.dataIndex,rules:(w=x.rules)!==null&&w!==void 0?w:[],children:(0,t.jsx)(q,{value:!0,content:x,onChange:x.onChange,type:l,typeKey:"affairType"})},x.key)},x.key)}),(0,t.jsx)(Q,{index:o.length+1,children:f}),c?(0,t.jsx)(Q,{index:f?o.length+2:o.length+1,children:(0,t.jsx)(B.Z.Item,{wrapperCol:{offset:o.filter(function(x){return h.includes(x.title)}).length?0:i&&i>900?2:5},children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.ZP,{loading:S,type:"primary",onClick:K,children:"\u786E\u8BA4"}),l!==m.DISPLAY?(0,t.jsx)(N.ZP,{type:"link",onClick:function(){return j.resetFields()},children:"\u6E05\u7A7A"}):""]})})}):""]})}var ln=me,Ce=["addAffair","delAffair","editAffair","formatList","getLists"];function un(n){return new Promise(function(e){e({data:[],code:200,msg:""})})}function he(n){var e,a=n.addAffair,i=n.delAffair,r=n.editAffair,o=n.formatList,f=o===void 0?function(Z){return Z}:o,A=n.getLists,l=en()(n,Ce),d=(0,u.useState)(function(){return dn(window.location.href)}),c=p()(d,2),C=c[0],h=c[1],$=J(a!=null?a:un),I=p()($,3),y=I[0],j=I[1],D=I[2],L=J(i!=null?i:un),S=p()(L,2),W=S[0],K=S[1],x=J(r!=null?r:un),F=p()(x,3),w=F[0],fn=F[1],V=F[2],vn=J(A,{refreshDeps:[C],debounceWait:400}),O=p()(vn,3),mn=O[0],U=O[1],R=O[2],M=(0,u.useMemo)(function(){var Z;return f==null?void 0:f((Z=R==null?void 0:R.data)!==null&&Z!==void 0?Z:[])},[R]),Cn=(0,u.useCallback)(function(Z){return h(Z)},[]),hn=(e={},g()(e,m.ADD,j),g()(e,m.EDIT,fn),e),gn=(0,u.useCallback)(function(Z,G){return hn[G](Z)},[U,C]),pn=(0,u.useCallback)(function(Z){return K(Z).then(function(G){return console.log(G)})},[]);return(0,u.useEffect)(function(){U(C)},[C]),(0,u.useEffect)(function(){(D||V)&&U(C)},[D,V]),(0,t.jsx)(on,v()({addLoading:a?y:void 0,deleteLoading:i?W:void 0,editLoading:r?w:void 0,dataSource:M,loading:mn,onAffairSuccess:gn,onClickDeleteButton:pn,onConditionChange:Cn},l))}var On=he,m;(function(n){n.ADD="add",n.DISPLAY="display",n.EDIT="edit"})(m||(m={}));var E;(function(n){n.CASCADER="CASCADER",n.CYCLESELECT="cycleSelect",n.CRON="cron",n.DATERANGE="dataRange",n.EXCEPTION="exception",n.INPUT="input",n.JSON="json",n.MODEL="selectModel",n.METRIC="selectMetric",n.RADIO="radio",n.SEARCHINPUT="searchInput",n.SELECT="select",n.SWITCH="switch",n.TAGLIST="tagList",n.TEXTAREA="textArea",n.TIMERANGE="timeRange",n.TIMESELECT="timeSelect",n.UPLOAD="uplaod",n.INSPECTION="inspection",n.STRATEGY="strategy",n.TEMPLATE="template",n.RULETEMPLATE="ruleTemplate"})(E||(E={}));function ge(n){var e=(0,u.useState)(n!=null?n:{}),a=p()(e,2),i=a[0],r=a[1],o=(0,u.useMemo)(function(){return function(){return(0,t.jsx)(an,v()({},i))}},[i]);return[i,r,o]}function pe(n){var e=(0,u.useState)(n!=null?n:{}),a=p()(e,2),i=a[0],r=a[1],o=(0,u.useMemo)(function(){return function(){return(0,t.jsx)(ln,v()({},i))}},[i]);return[i,r,o]}function Se(n){var e=(0,u.useState)(n!=null?n:{}),a=p()(e,2),i=a[0],r=a[1],o=(0,u.useMemo)(function(){return function(){return(0,t.jsx)(q,v()({},i))}},[i]);return[i,r,o]}var ye=s(99659);function J(n,e){var a=(0,ye.Z)(n,e?v()({manual:!0},e):{manual:!0}),i=a.data,r=a.runAsync,o=a.loading;return[o,r,i]}function xe(n){var e=(0,u.useState)(n!=null?n:{}),a=p()(e,2),i=a[0],r=a[1],o=(0,u.useMemo)(function(){return function(){return(0,t.jsx)(On,v()({},i))}},[i]);return[i,r,o]}function Ae(n){var e=(0,u.useState)(n!=null?n:{}),a=p()(e,2),i=a[0],r=a[1],o=(0,u.useMemo)(function(){return function(){return(0,t.jsx)(on,v()({},i))}},[i]);return[i,r,o]}var je=s(22821),sn=function(){var e=(0,je.Z)(),a=p()(e,2),i=a[0],r=a[1].toggle;return[i,r]},dn=function(e,a){var i=e.slice(e.indexOf("?"));return i.slice(1).split("&").reduce(function(r,o){return o.split("=")[1]&&(r[o.split("=")[0]]=o.split("=")[1].length>15||decodeURI(o.split("=")[1])===""||isNaN(Number(decodeURI(o.split("=")[1])))?decodeURI(o.split("=")[1]):Number(decodeURI(o.split("=")[1]))),r},a!=null?a:{current:1,pageSize:10})},cn=function(e){return JSON.stringify(e)},Te=function(e,a){return cn(e)===cn(a)}}}]);
