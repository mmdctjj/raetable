"use strict";(self.webpackChunkraetable=self.webpackChunkraetable||[]).push([[302],{76302:function(Be,xn,s){s.r(xn),s.d(xn,{BottomToTop:function(){return J},EAnimation:function(){return rn},ECondition:function(){return ln},EForm:function(){return dn},EFormItem:function(){return _},EPage:function(){return Xn},ETable:function(){return un},ETitle:function(){return ie},FORMTYPE:function(){return j},LeftToRight:function(){return Fn},OPERATION:function(){return v},RightToLeft:function(){return In},formatSearch:function(){return vn},objectIsQqual:function(){return Te},objectToString:function(){return mn},useCondition:function(){return Ce},useFetch:function(){return V},useForm:function(){return pe},useFormItem:function(){return Se},usePage:function(){return ye},useTable:function(){return Ae},useTrigger:function(){return fn}});var Kn=s(97857),f=s.n(Kn),Un=s(5574),p=s.n(Un),l=s(67294),k=s(67759),yn=s(71230),tn=s(15746),on=s(26713),B=s(71577),Gn=s(13769),an=s.n(Gn),Hn=s(68400),Z=s.n(Hn),$=s(94589),t=s(85893),Qn=["direction"],An,jn,Tn,En,bn,Dn,Jn=(0,$.F4)(An||(An=Z()([`
  0% {
    transform: translateX(50%);
  }
  80% {
    transform: translateX(-2%)
  }
  100% {
    transform: translateX(0);
    opacity: 1
  }
`]))),Vn=(0,$.F4)(jn||(jn=Z()([`
  0% {
    transform: translateX(-50%);
  }
  80% {
    transform: translateX(2%)
  }
  100% {
    transform: translateX(0);
    opacity: 1
  }
`]))),Mn=(0,$.F4)(Tn||(Tn=Z()([`
  0% {
    transform: translateY(50%);
  }

  80% {
    transform: translateY(-10%);
  }

  100% {
    transform: translateY(0);
    opacity: 1
  }
`]))),In=$.ZP.div(En||(En=Z()([`
  transform: translateX(50%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms
`])),Jn,function(n){var e;return(e=n.duration)!==null&&e!==void 0?e:300},function(n){var e,o;return((e=n.index)!==null&&e!==void 0?e:0)*((o=n.delay)!==null&&o!==void 0?o:130)}),Fn=$.ZP.div(bn||(bn=Z()([`
  transform: translateX(-100%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms;
`])),Vn,function(n){var e;return(e=n.duration)!==null&&e!==void 0?e:300},function(n){var e,o;return((e=n.index)!==null&&e!==void 0?e:0)*((o=n.delay)!==null&&o!==void 0?o:130)}),J=$.ZP.div(Dn||(Dn=Z()([`
  transform: translateY(50%);
  opacity: 0;
  animation: `," ",`ms;
  animation-iteration-count: 1;
  animation-fill-mode: forwards;
  animation-delay: `,`ms
`])),Mn,function(n){var e;return(e=n.duration)!==null&&e!==void 0?e:300},function(n){var e,o;return((e=n.index)!==null&&e!==void 0?e:0)*((o=n.delay)!==null&&o!==void 0?o:130)}),Yn=function(e){var o=e.direction,a=o===void 0?"BT":o,i=an()(e,Qn),r={BT:(0,t.jsx)(J,f()({},i)),RL:(0,t.jsx)(In,f()({},i)),LR:(0,t.jsx)(Fn,f()({},i))};return r[a]},rn=Yn;function qn(n){var e,o=n.condition,a=n.columns,i=n.onConditionChange,r=n.showConditionOkBtn,m=r===void 0?!1:r,x=n.size,u=k.Z.useForm(),c=p()(u,1),d=c[0],h=(0,l.useCallback)(function(C,T){return i(function(P){return f()(f()({},P),T)})},[i]),y=(0,l.useCallback)(function(){i({}),d.resetFields()},[d,i]);return(0,l.useEffect)(function(){return d.setFieldsValue(o)},[o]),(0,t.jsx)(k.Z,{form:d,labelCol:{span:6},layout:"inline",onValuesChange:m?function(){}:h,size:x,children:(0,t.jsxs)(yn.Z,{style:{width:"100%"},children:[(0,t.jsx)(tn.Z,{span:20,children:(0,t.jsx)(yn.Z,{children:a==null?void 0:a.map(function(C,T){return(0,t.jsx)(tn.Z,{span:(a.length===4,6),children:(0,t.jsx)(rn,{index:T,children:(0,t.jsx)(k.Z.Item,{name:C.dataIndex,label:C.title,children:(0,t.jsx)(_,{content:C,size:x,typeKey:"conditionType",type:v.EDIT,value:""})},C.key)})},C.key)})})}),(0,t.jsx)(tn.Z,{span:4,style:{textAlign:"right"},children:(0,t.jsx)(k.Z.Item,{children:(0,t.jsx)(rn,{index:(e=a==null?void 0:a.length)!==null&&e!==void 0?e:5,children:(0,t.jsxs)(on.Z,{children:[m?(0,t.jsx)(B.ZP,{onClick:function(){return i(d.getFieldsValue())},type:"primary",children:"\u786E\u5B9A"}):"",(0,t.jsx)(B.ZP,{onClick:function(){return y()},danger:!0,children:"\u6E05\u7A7A"})]})})})})]})})}var ln=qn,_n=s(9783),g=s.n(_n),ne=s(86738),ee=s(15223),te=s(48165),oe=s(37735),Ln,Zn,ae=$.ZP.div(Ln||(Ln=Z()([`
  display: flex;
  justify-content: space-between;
  align-items: center;
`]))),$n=$.ZP.div(Zn||(Zn=Z()([""]))),Pn=function(e){var o=e.affairName,a=o===void 0?"":o,i=e.backPath,r=i===void 0?"":i,m=e.extendAffair,x=e.onClickAdd,u=x===void 0?function(){}:x,c=e.pageTitle,d=c===void 0?"":c,h=(0,l.useCallback)(function(){window.location.href.includes("/#/")?window.location.hash=r:window.location.href=r},[r]);return(0,t.jsxs)(ae,{children:[(0,t.jsxs)($n,{children:[r&&r!==""?(0,t.jsx)(B.ZP,{icon:(0,t.jsx)(oe.Z,{}),onClick:h,type:"link"}):"",d]}),(0,t.jsx)($n,{children:(0,t.jsxs)(on.Z,{children:[m,(0,t.jsxs)(B.ZP,{onClick:u,type:"primary",children:["+ \u65B0\u589E",a]})]})})]})},ie=Pn,re=["affairName","backPath","columns","extendAffair","size","pageTitle","onAffairSuccess","onConditionChange","conditionContainerStyle","tableContainerStyle","titleContainerStyle"],kn,Bn,Nn,le=$.ZP.div(kn||(kn=Z()([`
  background-color: @primary-color
`]))),ue=$.ZP.div(Bn||(Bn=Z()([`
  background-color: @primary-color
`]))),se=$.ZP.div(Nn||(Nn=Z()([`
  background-color: @primary-color
`]))),de={background:"#fff",padding:15},Rn={background:"#fff",padding:15,margin:15};function ce(n){var e,o=n.affairName,a=o===void 0?"":o,i=n.backPath,r=i===void 0?"":i,m=n.columns,x=n.extendAffair,u=n.size,c=u===void 0?"middle":u,d=n.pageTitle,h=d===void 0?"":d,y=n.onAffairSuccess,C=y===void 0?function(){return new Promise(function(){})}:y,T=n.onConditionChange,P=n.conditionContainerStyle,F=P===void 0?{}:P,L=n.tableContainerStyle,D=L===void 0?{}:L,w=n.titleContainerStyle,K=w===void 0?{}:w,E=an()(n,re),S=fn(),z=p()(S,2),O=z[0],N=z[1],nn=(e={},g()(e,v.ADD,"\u65B0\u589E"),g()(e,v.EDIT,"\u7F16\u8F91"),g()(e,v.DISPLAY,"\u67E5\u770B"),e),hn=(0,l.useState)({}),U=p()(hn,2),gn=U[0],X=U[1],G=(0,l.useState)(v.ADD),en=p()(G,2),H=en[0],M=en[1],Cn=(0,l.useCallback)(function(A){M(v.EDIT),X(A),N()},[]),pn=(0,l.useCallback)(function(A){M(v.DISPLAY),X(A),N()},[]),I=(0,l.useCallback)(function(A){var b;window.localStorage.setItem("deleteKeys",A.join(",")),(b=E.onClickDeleteButton)===null||b===void 0||b.call(E,A).then(function(){return window.localStorage.removeItem("deleteKeys")}).catch(function(){return window.localStorage.removeItem("deleteKeys")})},[]),Y=(0,l.useCallback)(function(){M(v.ADD),X({}),N()},[]),Ee=(0,l.useState)(vn(window.location.href)),Wn=p()(Ee,2),Sn=Wn[0],be=Wn[1],De={title:"\u64CD\u4F5C",dataIndex:"action",key:"action",width:200,fixed:"right",render:function(b,R){var q,W;return(0,t.jsxs)(on.Z,{children:[E.editLoading!==void 0?(0,t.jsx)(B.ZP,{size:c,onClick:function(){return Cn(R)},type:"primary",children:"\u7F16\u8F91"}):"",E.deleteLoading!==void 0?(0,t.jsx)(ne.Z,{cancelText:"\u53D6\u6D88",description:"\u60A8\u786E\u8BA4\u5220\u9664\u8FD9\u6761".concat(a,"\u6570\u636E\u5417\uFF1F"),okText:"\u786E\u5B9A",okButtonProps:{loading:E.deleteLoading},onConfirm:function(){return I([R[E.rowKey]])},title:"\u5220\u9664",children:(0,t.jsx)(B.ZP,{danger:!0,loading:(q=window.localStorage.getItem("deleteKeys"))===null||q===void 0||(W=q.split(","))===null||W===void 0?void 0:W.includes(R[E.rowKey]),size:c,children:"\u5220\u9664"})}):"",(0,t.jsx)(B.ZP,{size:c,onClick:function(){return pn(R)},children:"\u8BE6\u60C5"})]})}},Ie=(0,l.useMemo)(function(){var A=m.filter(function(b){return!b.hiddenInTable}).map(function(b){return b.select?f()(f()({},b),{},{render:function(q){var W,Q;return(W=b.select)===null||W===void 0||(Q=W.find(function(ke){return ke.value===q}))===null||Q===void 0?void 0:Q.label}}):b});return A.find(function(b){return b.title==="\u64CD\u4F5C"})?A:A.concat(De)},[m]),Fe=(0,l.useMemo)(function(){return m.filter(function(A){return A.conditionType})},[m]),Le=(0,l.useMemo)(function(){return m.filter(function(A){return A.affairType})},[m]),Ze=(0,l.useCallback)(function(){return N()},[]),$e=(0,l.useCallback)(function(){return N()},[]),Pe=function(b){return H===v.DISPLAY?new Promise(function(R){N(),R({})}):C(b,H).then(function(){return N()}).catch(function(R){throw new Error(R)})};return(0,l.useEffect)(function(){return T&&T(Sn)},[Sn]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(se,{className:E.titleContainerClass,style:f()(f()({},de),K),children:(0,t.jsx)(Pn,{affairName:a,backPath:r,extendAffair:x,onClickAdd:Y,pageTitle:h})}),(0,t.jsx)(le,{className:E.conditionContainerClass,style:f()(f()({},Rn),F),children:(0,t.jsx)(ln,{columns:Fe,condition:Sn,size:c,onConditionChange:be})}),(0,t.jsx)(ue,{className:E.tableContainerClass,style:f()(f()({},Rn),D),children:(0,t.jsx)(ee.Z,f()({columns:Ie,size:c},E))}),(0,t.jsx)(te.Z,{open:O,onCancel:Ze,onOk:$e,title:nn[H]+a,footer:!1,children:(0,t.jsx)(dn,{affairWidth:700,columns:Le,affairData:gn,type:H,onAffairSuccess:Pe})})]})}var un=ce,zn=s(13689),sn=s(89847),wn=s(55742),On=s(72269),fe=s(34041);function ve(n){var e,o,a,i,r,m,x,u=n.content,c=n.value,d=n.onChange,h=n.size,y=n.type,C=n.typeKey;if(!(u!=null&&u[C]))return(0,t.jsx)(t.Fragment,{});var T=(e={},g()(e,j.CASCADER,(0,t.jsx)(zn.Z,{size:h,placeholder:"\u8BF7\u8F93\u5165".concat(u.title),value:c,onChange:d,options:u.select,loadData:u.loadData})),g()(e,j.INPUT,(0,t.jsx)(sn.Z,{size:h,value:c,placeholder:"\u8BF7\u8F93\u5165".concat(u.title),onChange:d})),g()(e,j.RADIO,(0,t.jsx)(wn.ZP.Group,f()({size:h,options:u.select,value:c,onChange:d,disabled:y===v.DISPLAY},u))),g()(e,j.SWITCH,(0,t.jsx)(On.Z,{onChange:function(D){return d==null?void 0:d(D===!0?1:0)},checked:typeof c=="undefined"?!0:Boolean(c),disabled:y===v.DISPLAY})),g()(e,j.SELECT,(0,t.jsx)(fe.Z,{size:h,style:{minWidth:100},allowClear:!0,options:u.select,onChange:function(D){u.linked&&localStorage.setItem(u.dataIndex,D),d==null||d(D)},placeholder:"\u8BF7\u9009\u62E9".concat(u.title),value:c})),g()(e,j.TEXTAREA,(0,t.jsx)(sn.Z.TextArea,{size:h,disabled:y===v.DISPLAY,placeholder:"\u8BF7\u8F93\u5165".concat(u.title),onChange:d,rows:5,value:c})),e),P=(i={},g()(i,j.CASCADER,(0,t.jsx)(zn.Z,{size:h,placeholder:"\u8BF7\u8F93\u5165".concat(u.title),value:c,onChange:d,options:u.select,loadData:u.loadData})),g()(i,j.INPUT,(0,t.jsx)(t.Fragment,{children:c})),g()(i,j.RADIO,(0,t.jsx)(wn.ZP.Group,f()({size:h,options:u.select,value:c,onChange:d,disabled:y===v.DISPLAY},u))),g()(i,j.SWITCH,(0,t.jsx)(On.Z,{onChange:function(D){return d==null?void 0:d(D===!0?1:0)},checked:typeof c=="undefined"?!0:Boolean(c),disabled:y===v.DISPLAY})),g()(i,j.SELECT,(0,t.jsx)(t.Fragment,{children:(o=u.select)===null||o===void 0||(a=o.find(function(L){return L.value===c}))===null||a===void 0?void 0:a.label})),g()(i,j.TEXTAREA,(0,t.jsx)(t.Fragment,{children:c})),i),F=(r={},g()(r,v.ADD,T),g()(r,v.EDIT,T),g()(r,v.DISPLAY,P),r);return(m=(x=F[y])===null||x===void 0?void 0:x[u==null?void 0:u[C]])!==null&&m!==void 0?m:(0,t.jsx)(t.Fragment,{children:"\u6682\u65E0\u5339\u914D\u9879"})}var _=ve;function me(n){var e=n.affairData,o=e===void 0?{}:e,a=n.affairWidth,i=n.columns,r=i===void 0?[]:i,m=n.extendForm,x=n.type,u=x===void 0?v.ADD:x,c=n.isShowSumbit,d=c===void 0?!0:c,h=n.hiddenLabels,y=h===void 0?[]:h,C=n.onAffairSuccess,T=k.Z.useForm(),P=p()(T,1),F=P[0],L=fn(),D=p()(L,2),w=D[0],K=D[1],E=(0,l.useCallback)(function(){F.validateFields().then(function(S){K(),C==null||C(S).then(function(){return K()})})},[F,u]);return(0,l.useEffect)(function(){return Object.keys(o).length===0?F.resetFields():F.setFieldsValue(f()({enabled:0},o))},[o]),(0,t.jsxs)(k.Z,{form:F,layout:"horizontal",labelAlign:"right",labelCol:{span:a&&a>900?2:5},labelWrap:!0,children:[(0,t.jsx)(k.Z.Item,{style:{display:"none"},name:"id",children:(0,t.jsx)(sn.Z,{type:"hidden"})}),r==null?void 0:r.map(function(S,z){var O;return(0,t.jsx)(J,{index:z,children:(0,t.jsx)(k.Z.Item,{label:(0,t.jsx)(t.Fragment,{children:y.includes(S.title)?"":S.title}),name:S.dataIndex,rules:(O=S.rules)!==null&&O!==void 0?O:[],children:(0,t.jsx)(_,{value:!0,content:S,onChange:S.onChange,type:u,typeKey:"affairType"})},S.key)},S.key)}),(0,t.jsx)(J,{index:r.length+1,children:m}),d?(0,t.jsx)(J,{index:m?r.length+2:r.length+1,children:(0,t.jsx)(k.Z.Item,{wrapperCol:{offset:r.filter(function(S){return y.includes(S.title)}).length?0:a&&a>900?2:5},children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B.ZP,{loading:w,type:"primary",onClick:E,children:"\u786E\u8BA4"}),u!==v.DISPLAY?(0,t.jsx)(B.ZP,{type:"link",onClick:function(){return F.resetFields()},children:"\u6E05\u7A7A"}):""]})})}):""]})}var dn=me,he=["addAffair","delAffair","editAffair","formatList","getLists"];function cn(n){return new Promise(function(e){e({data:[],code:200,msg:""})})}function ge(n){var e,o=n.addAffair,a=n.delAffair,i=n.editAffair,r=n.formatList,m=r===void 0?function(I){return I}:r,x=n.getLists,u=an()(n,he),c=(0,l.useState)(function(){return vn(window.location.href)}),d=p()(c,2),h=d[0],y=d[1],C=V(o!=null?o:cn),T=p()(C,3),P=T[0],F=T[1],L=T[2],D=V(a!=null?a:cn),w=p()(D,2),K=w[0],E=w[1],S=V(i!=null?i:cn),z=p()(S,3),O=z[0],N=z[1],nn=z[2],hn=V(x,{refreshDeps:[h],debounceWait:400}),U=p()(hn,3),gn=U[0],X=U[1],G=U[2],en=(0,l.useMemo)(function(){var I;return m==null?void 0:m((I=G==null?void 0:G.data)!==null&&I!==void 0?I:[])},[G]),H=(0,l.useCallback)(function(I){return y(I)},[]),M=(e={},g()(e,v.ADD,F),g()(e,v.EDIT,N),e),Cn=(0,l.useCallback)(function(I,Y){return M[Y](I)},[X,h]),pn=(0,l.useCallback)(function(I){return E(I).then(function(Y){return console.log(Y)})},[]);return(0,l.useEffect)(function(){X(h)},[h]),(0,l.useEffect)(function(){(L||nn)&&X(h)},[L,nn]),(0,t.jsx)(un,f()({addLoading:o?P:void 0,deleteLoading:a?K:void 0,editLoading:i?O:void 0,dataSource:en,loading:gn,onAffairSuccess:Cn,onClickDeleteButton:pn,onConditionChange:H},u))}var Xn=ge,v;(function(n){n.ADD="add",n.DISPLAY="display",n.EDIT="edit"})(v||(v={}));var j;(function(n){n.CASCADER="CASCADER",n.CYCLESELECT="cycleSelect",n.CRON="cron",n.DATERANGE="dataRange",n.EXCEPTION="exception",n.INPUT="input",n.JSON="json",n.MODEL="selectModel",n.METRIC="selectMetric",n.RADIO="radio",n.SEARCHINPUT="searchInput",n.SELECT="select",n.SWITCH="switch",n.TAGLIST="tagList",n.TEXTAREA="textArea",n.TIMERANGE="timeRange",n.TIMESELECT="timeSelect",n.UPLOAD="uplaod",n.INSPECTION="inspection",n.STRATEGY="strategy",n.TEMPLATE="template",n.RULETEMPLATE="ruleTemplate"})(j||(j={}));function Ce(n){var e=(0,l.useState)(n!=null?n:{}),o=p()(e,2),a=o[0],i=o[1],r=(0,l.useMemo)(function(){return function(){return(0,t.jsx)(ln,f()({},a))}},[a]);return[a,i,r]}function pe(n){var e=(0,l.useState)(n!=null?n:{}),o=p()(e,2),a=o[0],i=o[1],r=(0,l.useMemo)(function(){return function(){return(0,t.jsx)(dn,f()({},a))}},[a]);return[a,i,r]}function Se(n){var e=(0,l.useState)(n!=null?n:{}),o=p()(e,2),a=o[0],i=o[1],r=(0,l.useMemo)(function(){return function(){return(0,t.jsx)(_,f()({},a))}},[a]);return[a,i,r]}var xe=s(99659);function V(n,e){var o=(0,xe.Z)(n,e?f()({manual:!0},e):{manual:!0}),a=o.data,i=o.runAsync,r=o.loading;return[r,i,a]}function ye(n){var e=(0,l.useState)(n!=null?n:{}),o=p()(e,2),a=o[0],i=o[1],r=(0,l.useMemo)(function(){return function(){return(0,t.jsx)(Xn,f()({},a))}},[a]);return[a,i,r]}function Ae(n){var e=(0,l.useState)(n!=null?n:{}),o=p()(e,2),a=o[0],i=o[1],r=(0,l.useMemo)(function(){return function(){return(0,t.jsx)(un,f()({},a))}},[a]);return[a,i,r]}var je=s(22821),fn=function(){var e=(0,je.Z)(),o=p()(e,2),a=o[0],i=o[1].toggle;return[a,i]},vn=function(e,o){var a=e.slice(e.indexOf("?"));return a.slice(1).split("&").reduce(function(i,r){return r.split("=")[1]&&(i[r.split("=")[0]]=r.split("=")[1].length>15||decodeURI(r.split("=")[1])===""||isNaN(Number(decodeURI(r.split("=")[1])))?decodeURI(r.split("=")[1]):Number(decodeURI(r.split("=")[1]))),i},o!=null?o:{current:1,pageSize:10})},mn=function(e){return JSON.stringify(e)},Te=function(e,o){return mn(e)===mn(o)}}}]);
